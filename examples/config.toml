# vqx Configuration File
# vqx 設定ファイル
#
# Location / 保存場所:
#   macOS/Linux: ~/.config/vqx/config.toml
#   Windows:     %APPDATA%\vqx\config.toml
#
# PDF Reference: CLI Reference Guide
# PDF参照: CLI Reference Guide

# =============================================================================
# CLI Executable / CLI実行ファイル
# =============================================================================

# Path to the underlying Vantiq CLI executable
# Vantiq CLI実行ファイルのパス
# PDF: Default is "vantiq" (Mac/Linux) or "vantiq.bat" (Windows)
# PDF: デフォルトは "vantiq" (Mac/Linux) または "vantiq.bat" (Windows)
# Can also be set via VQX_CLI_PATH environment variable
# 環境変数 VQX_CLI_PATH でも設定可能
cli_path = "vantiq"

# =============================================================================
# Execution Settings / 実行設定
# =============================================================================

# Default timeout for CLI operations in seconds
# CLI操作のデフォルトタイムアウト（秒）
timeout_seconds = 120

# Maximum number of retries for transient failures
# 一時的な障害に対する最大リトライ回数
max_retries = 3

# Base delay for exponential backoff (milliseconds)
# 指数バックオフの基本遅延（ミリ秒）
retry_delay_ms = 1000

# Default chunk size for export/import operations
# エクスポート/インポート操作のデフォルトチャンクサイズ
# PDF: "-chunk <integer>" option / PDF: "-chunk <integer>" オプション
default_chunk_size = 5000

# =============================================================================
# Logging Configuration / ログ設定
# =============================================================================

[logging]
# Log level: trace, debug, info, warn, error
# ログレベル: trace, debug, info, warn, error
level = "info"

# Log format: text, json
# ログ形式: text, json
format = "text"

# Include timestamps in logs
# ログにタイムスタンプを含める
timestamps = true

# Optional log file path (uncomment to enable)
# ログファイルパス（コメント解除で有効化）
# file = "/var/log/vqx/vqx.log"

# =============================================================================
# Output Configuration / 出力設定
# =============================================================================

[output]
# Default output format: json, table, csv
# デフォルト出力形式: json, table, csv
default_format = "table"

# Pretty print JSON output
# JSON出力を整形表示
pretty_json = true

# Use colors in output
# 出力に色を使用
colors = true

# Show progress bars for long operations
# 長時間操作で進捗バーを表示
progress = true

# =============================================================================
# Safe Delete Configuration (Phase 4)
# 安全な削除設定（Phase 4）
# Extension: Wraps PDF's delete/deleteMatching with safety measures
# 拡張機能: PDFのdelete/deleteMatchingを安全機能でラップ
# =============================================================================

[safe_delete]
# Always require confirmation for destructive operations
# 破壊的操作には常に確認を要求
require_confirm = true

# Always create backup before delete
# 削除前に常にバックアップを作成
require_backup = true

# Maximum items to delete without explicit --force
# --force なしで削除できる最大アイテム数
max_items_without_force = 10

# Directory for backups (optional)
# バックアップディレクトリ（オプション）
# backup_dir = "~/.vqx/backups"

# Allowlist of resource prefixes that can be deleted
# 削除可能なリソースプレフィックスの許可リスト
# Empty = allow all (subject to blocklist)
# 空 = すべて許可（ブロックリストの対象）
allowed_prefixes = []

# Blocklist of resource prefixes that cannot be deleted
# 削除不可のリソースプレフィックスのブロックリスト
# Protects system resources from accidental deletion
# システムリソースを誤削除から保護
blocked_prefixes = ["System", "ARS"]

# =============================================================================
# JSON Normalization Settings (Phase 2+)
# JSON正規化設定（Phase 2以降）
# Extension: Normalizes CLI output for git-friendly diffs
# 拡張機能: gitフレンドリーな差分のためにCLI出力を正規化
# =============================================================================

[normalization]
# Sort object keys alphabetically
# オブジェクトキーをアルファベット順にソート
sort_keys = true

# Sort arrays by name/id field
# 配列をname/idフィールドでソート
sort_arrays = true

# Fields to exclude from normalized output (timestamps, etc.)
# 正規化出力から除外するフィールド（タイムスタンプなど）
# These fields change frequently and clutter diffs
# これらのフィールドは頻繁に変更され、差分を乱雑にする
excluded_fields = [
    "ars_modifiedAt",
    "ars_createdAt",
    "ars_modifiedBy",
    "ars_createdBy",
    "_id",
    "ars_version",
]

# Fields to use for array sorting (in priority order)
# 配列ソートに使用するフィールド（優先順）
array_sort_fields = ["name", "id", "_id"]
